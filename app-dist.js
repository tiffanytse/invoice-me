"use strict";function roundNumber(t,a){var e;if((a=Number(a))<1)e=Math.round(t).toString();else{var n=t.toString();-1==n.lastIndexOf(".")&&(n+=".");var s=n.lastIndexOf(".")+a,p=Number(n.substring(s,s+1));if(Number(n.substring(s+1,s+2))>=5){if(9==p&&s>0)for(;s>0&&(9==p||isNaN(p));)"."!=p?(s-=1,p=Number(n.substring(s,s+1))):s-=1;p+=1}10==p?(n=n.substring(0,n.lastIndexOf(".")),e=(Number(n)+1).toString()+"."):e=n.substring(0,s)+p.toString()}-1==e.lastIndexOf(".")&&(e+=".");for(var r=e.substring(e.lastIndexOf(".")+1).length,o=0;o<a-r;o++)e+="0";return e}var app={};app.hstRate=.13,app.form=$(".invoice"),app.addRow=$(".js-add-row"),app.deleteRow=$(".js-delete-row"),app.invoiceBody=$(".js-invoice-body"),app.subTotal=$(".js-subtotal"),app.total=$(".js-total"),app.balanceTotal=$(".js-balance"),app.init=function(){app.form.on("submit",function(t){t.preventDefault()}),app.addRow.click(function(){$(".js-invoice-body").append('<tr class="item-row"><td class="js-delete-row"><span class="delete-icon" title="Remove row"><svg class="custom-icon-trash-o"><use xlink:href="#custom-icon-trash-o"></use></svg></span></td><td class="item-name"><textarea placeholder="Task/Item Name"></textarea></td><td class="description"> <textarea placeholder="Description"></textarea> </td><td> <input class="rate" type="number" value="0.00"></td><td> <input class="qty" type="number" value="0"> </td><td> <span class="line-total">$0</span> </td></tr>')}),$(".js-invoice-body").on("click",".js-delete-row",function(){$(this).parent().remove()}),$(".rate, .qty, .select-tax").blur(app.updateLineTotal),$(".paid").blur(app.updateBalance)},app.updateLineTotal=function(){var t=$(this).closest("tr"),a=t.find(".rate").val(),e=t.find(".qty").val(),n=parseFloat(a)*parseInt(e);n=n.toFixed(2),t.find(".line-total").text(n),app.updateTotals()},app.calculateTax=function(t){return.13*t},app.updateTotals=function(){var t=0;$(".line-total").each(function(a){var e=$(this).text();isNaN(e)||(t+=parseFloat(e))}),t=roundNumber(t,2),app.subTotal.text(t);var a=app.calculateTax(t),e=parseFloat(t)+a;e=roundNumber(e,2),a=roundNumber(a,2),app.total.text(e),$(".js-tax").text(a),app.updateBalance()},app.updateBalance=function(){var t=parseFloat(app.total.text())-parseInt($(".js-paid").val());t=roundNumber(t,2),app.balanceTotal.text(t)},$(function(){app.init()});