"use strict";var app={};app.hstRate=.13,app.form=$(".invoice"),app.addRow=$(".js-add-row"),app.deleteRow=$(".js-delete-row"),app.invoiceBody=$(".js-invoice-body"),app.subTotal=$(".js-subtotal"),app.total=$(".js-total"),app.paid=$(".js-paid"),app.balanceTotal=$(".js-balance"),app.init=function(){app.form.on("submit",function(t){t.preventDefault()}),app.addRow.click(function(){$(".js-invoice-body").append('<tr class="item-row"><td class="js-delete-row"><span class="delete-icon" title="Remove row"><svg class="custom-icon-trash-o"><use xlink:href="#custom-icon-trash-o"></use></svg></span></td><td class="item-name"><textarea placeholder="Task/Item Name"></textarea></td><td class="description"> <textarea placeholder="Description"></textarea> </td><td> <input class="input-width rate" type="number" value="0.00"></td><td> <input class="input-width qty" type="number" value="0"> </td><td> <span class="line-total">$0.00</span> </td></tr>')}),$(".js-invoice-body").on("click",".js-delete-row",function(){$(this).parent().remove()}),$(".js-invoice-body").on("click",'input[type="number"]',function(t){$(this).blur(app.updateLineTotal)}),$(".paid").blur(app.updateBalance),$(".js-print").on("click",function(t){t.preventDefault(),window.print()})},app.updateLineTotal=function(){var t=$(this).closest("tr"),a=t.find(".rate").val(),e=t.find(".qty").val(),p=parseFloat(a,10)*parseInt(e,10);p=p.toFixed(2),t.find(".line-total").text(p),app.updateTotals()},app.calculateTax=function(t){return.13*t},app.updateTotals=function(){var t=0;$(".line-total").each(function(a){var e=$(this).text();isNaN(e)||(t+=parseFloat(e,10))}),t=app.getRoundNumber(t,2),app.subTotal.text(t);var a=app.calculateTax(t),e=parseFloat(t)+a;e=app.getRoundNumber(e,2),a=app.getRoundNumber(a,2),app.total.text(e),$(".js-tax").text(a),app.updateBalance()},app.updateBalance=function(){var t=parseFloat(app.total.text())-parseInt(app.paid.val());t=app.getRoundNumber(t,2),app.balanceTotal.text(t)},app.getRoundNumber=function(t,a){var e;if((a=Number(a))<1)e=Math.round(t).toString();else{var p=t.toString();-1==p.lastIndexOf(".")&&(p+=".");var n=p.lastIndexOf(".")+a,i=Number(p.substring(n,n+1));if(Number(p.substring(n+1,n+2))>=5){if(9==i&&n>0)for(;n>0&&(9==i||isNaN(i));)"."!=i?(n-=1,i=Number(p.substring(n,n+1))):n-=1;i+=1}10==i?(p=p.substring(0,p.lastIndexOf(".")),e=(Number(p)+1).toString()+"."):e=p.substring(0,n)+i.toString()}-1==e.lastIndexOf(".")&&(e+=".");for(var s=e.substring(e.lastIndexOf(".")+1).length,o=0;o<a-s;o++)e+="0";return e},$(function(){app.init()});